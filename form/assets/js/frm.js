let formData = {
    'step_1_input1': '-',
    'step_1_input2': '-', 
    'step_2_input1': '-',
    'step_2_input2': '-',
    'step_3_input1': '-',
    'step_3_input2': '-',             
    'step_3_input3': '-',
    'step_3_input4': '-',
    'step_4_input1': '-',
    'step_4_input2': '-',
    'step_5_input1': '-',
    'step_6_input1': '-',
    'step_6_input2': '-',
    'step_6_input3': '-',
    'step_7_input1': '-',
    'step_7_input2': '-',
    'step_7_input3': '-',
    'step_8_input1': '-',
    'step_8_input2': '-',
    'step_9_input1': '-',
    'step_9_input2': '-',
    'step_10_input1': '-',
    'step_10_input2': '-',
    'step_10_input3': '-',
    'step_11_input1': '-',
    'step_11_input2': '-',
    'step_12_input1': '-',
    'step_13_input1': '-',
    'step_13_input2': '-',
    'step_13_input3': '-',
    'step_14_input1': '-',
    'step_15_input1': '-',
    'step_15_input2': '-',
    'step_15_input3': '-',
    'step_15_input4': '-',
    'step_16_input1': '-',
    'step_16_input2': '-',
    'step_16_input3': '-',
    'step_16_input4': '-',
    'step_17_input1': '-',
    'step_17_input2': '-',
    'step_18_input1': '-',
    'step_18_input2': '-',
    'step_19_input1': '-',
    'step_20_input1': '-',
    'step_20_input2': '-',
    'step_20_input3': '-',
    'step_20_input4': '-',
    'step_20_input5': '-',
    'step_21_input1': '-',
    'step_21_input2': '-',
    'step_22_input1': '-',
    'step_22_input2': '-',
    'step_23_input1': '-',
    'step_23_input2': '-',
    'step_23_input3': '-',
    'step_23_input4': '-',
    'step_25_input1': '-',
    'step_25_input2': '-',
    'step_25_input3': '-',
    'step_27_input1': '-',
    'step_27_input2': '-',
    'step_31_input1': '-',
    'step_34_input4': '-',
    'step_35_input1': '-',
    'step_35_input2': '-',
    'step_35_input3': '-',
    'step_38_input3': '-',
    'step_39_input1': '-',
    'step_39_input2': '-',
    'step_39_input3': '-',
    'step_39_input4': '-',
    'step_40_input13': '-',
    'step_41_input5': '-',
    'step_42_input5': '-',
    'step_44_input1': '-',
    'step_44_input2': '-',
    'step_45_input1': '-',
    'step_45_input2': '-',
    'step_45_input3': '-',
    'step_45_input4': '-',
    'step_45_input5': '-',
    'step_46_input1': '-',
    'step_47_input1': '-',
    'step_47_input2': '-',
    'step_47_input3': '-',
    'step_48_input1': '-',
    'step_48_input2': '-',
    'step_48_input3': '-',
    'step_50_input1': '-',
    'step_51_input2': '-',
    'step_52_input1': '-',
    'step_52_input3': '-',
    'step_53_input1': '-',
    'step_53_input2': '-',
    'step_53_input3': '-',
    'step_53_input5': '-',
    'step_54_input2': '-',
    'step_56_input2': '-',
    'step_57_input2': '-',
    'step_58_input2': '-',
    'step_62_input1_date': '-',
    'step_62_input2_date': '-',
    'step_62_input3_date': '-',
    'step_62_input4_date': '-',
    'step_63_input2': '-',
    'step_66_input2': '-',
    'step_66_input3': '-',
    'step_67_input3': '-',
    'step_67_input4': '-',
    'step_67_input5': '-',
    'step_68_input2': '-',
    'step_68_input3': '-',
    'step_68_input4': '-',
    'step_69_input2': '-',
    'step_69_input4': '-',
    'step_69_input6': '-',
    'step_69_input8': '-',
    'step_69_input10': '-',
    'step_69_input12': '-',
    'step_69_input14': '-',
    'step_69_input16': '-',
    'step_69_input18': '-',
    'step_71_input17': '-',
    'step_72_input1': '-',
    'step_72_input2': '-',
    'step_72_input3': '-',
    'step_72_input4': '-',
    'step_72_input5': '-',
    'step_72_input6': '-',
    'step_72_input7': '-',
    'step_72_input8': '-',
    'step_72_input9': '-',
    'step_72_input10': '-',
    'step_72_input11': '-',
    'step_72_input12': '-',
    'step_73_input3': '-',
    'step_73_input5': '-',
    'step_74_input2': '-',
    'step_74_input4': '-',
    'step_74_input6': '-',
    'step_74_input8': '-',
    'step_75_input1': '-',
    'step_75_input2': '-',
    'step_75_input3': '-',
    'step_75_input4': '-',
    'step_75_input5': '-',
    'step_75_input6': '-',
    'step_75_input7': '-',
    'step_76_input2': '-',
    'step_76_input3': '-',
    'step_76_input4': '-',
    'step_76_input5': '-',
    'step_76_input6': '-',
    'step_76_input7': '-',
    'step_77_input2': '-',
    'step_77_input3': '-',
    'step_78_input1': '-',
    'step_78_input2': '-',
    'step_78_input3': '-',
    'step_78_input4': '-',
    'step_78_input5': '-',
    'step_78_input6': '-',
    'step_79_input2': '-',
    'step_80_input1': '-',
    'step_81_input1': '-',
    'step_81_input2': '-',
    'step_81_input3': '-',
    'step_81_input4': '-',
    'step_81_input5': '-',
    'step_81_input6': '-',
    'step_81_input7': '-',
    'step_81_input8': '-',
    'step_81_input9': '-',
    'step_81_input10': '-',
    'step_81_input11': '-',
    'step_81_input12': '-',
    'step_81_input13': '-',
    'step_81_input14': '-',
    'step_81_input15': '-',
    'step_81_input16': '-',
    'step_81_input17': '-',
    'step_81_input18': '-',
    'step_81_input19': '-',
    'step_81_input20': '-',
    'step_81_input21': '-',
    'step_81_input22': '-',
    'step_81_input23': '-',
    'step_81_input24': '-',
    'step_81_input25': '-',
    'step_81_input26': '-',
    'step_81_input27': '-',
    'step_81_input28': '-',
    'step_81_input29': '-',
    'step_81_input30': '-',
    'step_81_input31': '-',
    'step_81_input32': '-',
    'step_82_input1': '-',
    'step_85_input1': '-',
    'step_85_input2': '-',    
    'step_24_input1': '-',
    'step_34_input1': '-',
    'step_34_input2': '-',
    'step_34_input3': '-',
    'step_43_input1': '-',
    'step_50_input2': '-',
    'step_51_input1': '-',
    'step_51_input3': '-',
    'step_52_input2': '-',
    'step_56_input3': '-',
    'step_57_input3': '-',
    'step_58_input3': '-',
    'step_59_input1': '-',
    'step_59_input2': '-',
    'step_62_input1': '-',
    'step_62_input2': '-',
    'step_62_input3': '-',
    'step_62_input4': '-',
    'step_63_input1': '-',
    'step_63_input3': '-',
    'step_63_input4': '-',
    'step_64_input1': '-',
    'step_64_input2': '-',
    'step_65_input1': '-',
    'step_65_input2': '-',
    'step_66_input1': '-',
    'step_67_input1': '-',
    'step_67_input2': '-',
    'step_68_input1': '-',
    'step_69_input1': '-',
    'step_69_input3': '-',
    'step_69_input5': '-',
    'step_69_input7': '-',
    'step_69_input9': '-',
    'step_69_input11': '-',
    'step_69_input13': '-',
    'step_69_input15': '-',
    'step_69_input17': '-',
    'step_70_input1': '-',
    'step_70_input2': '-',
    'step_70_input3': '-',
    'step_70_input4': '-',
    'step_70_input5': '-',
    'step_70_input6': '-',
    'step_70_input7': '-',
    'step_70_input8': '-',
    'step_70_input9': '-',
    'step_70_input10': '-',
    'step_70_input11': '-',
    'step_70_input12': '-',
    'step_70_input13': '-',
    'step_70_input14': '-',
    'step_70_input15': '-',
    'step_70_input16': '-',
    'step_70_input17': '-',
    'step_70_input18': '-',
    'step_70_input19': '-',
    'step_71_input1': '-',
    'step_71_input2': '-',
    'step_71_input3': '-',
    'step_71_input4': '-',
    'step_71_input5': '-',
    'step_71_input6': '-',
    'step_71_input7': '-',
    'step_71_input8': '-',
    'step_71_input9': '-',
    'step_71_input10': '-',
    'step_71_input11': '-',
    'step_71_input12': '-',
    'step_71_input13': '-',
    'step_71_input14': '-',
    'step_71_input15': '-',
    'step_71_input16': '-',
    'step_73_input1': '-',
    'step_73_input2': '-',
    'step_73_input4': '-',
    'step_74_input5': '-',
    'step_76_input1': '-',
    'step_77_input1': '-',
    'step_79_input1': '-',
    'step_83_input1': '-',
    'step_83_input2': '-',
    'step_83_input3': '-', 
    'step_83_input4': '-',
    'step_83_input5': '-',
    'step_83_input6': '-',   
    'step_83_input7': '-',
    'step_83_input8': '-',
    'step_83_input9': '-',  
    'step_83_input10': '-',
    'step_83_input11': '-',
    'step_83_input12': '-',  
    'step_83_input13': '-',
    'step_83_input14': '-',
    'step_83_input15': '-',  
    'step_83_input16': '-',
    'step_83_input17': '-',
    'step_83_input18': '-',  
    'step_84_input1': '-',
    'step_84_input2': '-',
    'step_84_input3': '-',
    'step_84_input4': '-',
    'step_84_input5': '-',
    'step_84_input6': '-',
    'step_84_input7': '-',
    'step_84_input8': '-',
    'step_84_input9': '-',
    'step_84_input10': '-',
    'step_84_input11': '-',
    'step_84_input12': '-',
    'step_84_input13': '-',
    'step_84_input15': '-',
    'step_84_input16': '-',
    'step_84_input17': '-',
    'step_84_input18': '-',
    'step_38_input1': '-',
    'step_38_input2': '-',
    'step_38_input4': '-',
    'step_38_input5': '-',
    'step_40_input1': '-',
    'step_40_input2': '-',
    'step_40_input3': '-',
    'step_40_input4': '-',
    'step_40_input5': '-',
    'step_40_input6': '-',
    'step_40_input7': '-',
    'step_40_input8': '-',
    'step_40_input9': '-',
    'step_40_input10': '-',
    'step_40_input11': '-',
    'step_40_input12': '-',
    'step_40_input14': '-',
    'step_41_input1': '-',
    'step_41_input2': '-',
    'step_41_input3': '-',
    'step_41_input4': '-',
    'step_41_input6': '-',
    'step_42_input1': '-',
    'step_42_input2': '-',
    'step_42_input3': '-',
    'step_42_input4': '-',
    'step_42_input6': '-',
    'step_49_input1': '-',
    'step_49_input2': '-',
    'step_49_input3': '-',
    'step_49_input4': '-',
    'step_53_input4': '-',
    'step_53_input4_2': '-',
    'step_53_input6': '-',
    'step_53_input6_2': '-',
    'step_54_input1': '-',
    'step_54_input1_2': '-',
    'step_56_input1': '-',
    'step_57_input1': '-',
    'step_58_input1': '-',
    'step_60_input1': '-',
    'step_60_input2': '-',
    'step_60_input3': '-',
    'step_60_input4': '-',
    'step_60_input5': '-',
    'step_60_input6': '-',
    'step_61_input1': '-',
    'step_61_input2': '-',
    'step_61_input3': '-',
    'step_61_input4': '-',
    'step_61_input5': '-',
    'step_74_input1': '-',
    'step_74_input3': '-',
    'step_74_input7': '-',
    'step_74_input11': '-',
    'step_74_input9': '-',
    'step_74_input10': '-',

    };

$(".inputfild").on('keyup', function(event){
    event.stopPropagation();
    event.stopImmediatePropagation();
    if(event.keyCode === 13){
        $(this).parent().find('.btnsfrmsok').click();
    }    
});

$(".inputfildsel").on('keyup', function(event){
    event.stopPropagation();
    event.stopImmediatePropagation();
    if(event.keyCode === 13){
        $(this).parent().parent().find('.btnsfrmsok').click();
    }    
});

$(".myRd").on('keyup', function(event){
    event.stopPropagation();
    event.stopImmediatePropagation();
    if(event.keyCode === 13){
        $(this).parent().parent().parent().find('.btnsfrmsok').click();
    }    
});

$(".ourspecchk").on('keyup', function(event){
    event.stopPropagation();
    event.stopImmediatePropagation();
    if(event.keyCode === 13){
        $(this).parent().parent().parent().find('.btnsfrmsok').click();
    }    
});

$(".sendchk").on('keyup', function(event){
    event.stopPropagation();
    event.stopImmediatePropagation();
    if(event.keyCode === 13){
        $(this).parent().parent().parent().find('.btnsfrmsok').click();
    }    
});

$(".chkall").on('click', function() {
    if ($(this).prop('checked')) {
        $(this).closest('.stpsform').find('input[type="checkbox"]').prop('checked', true);
    } else {
        $(this).closest('.stpsform').find('input[type="checkbox"]').prop('checked', false);
    }
});

$('.frm_stp_1 input:first').focus();

function validationRuleCheck(stpnum){   
    if(stpnum == 1) {   
        formData['step_1_input1'] = $('input[name="step_1_input1"]').val(); 
        formData['step_2_input1'] = $('input[name="step_2_input1"]').val();      
        if(!$('input[name="step_1_input1"]').val() || !$('input[name="step_1_input2"]').val()){            
            return false;
        }        
    } else if(stpnum == 2) {        
        if(!$('input[name="step_2_input1"]').val() || !$('input[name="step_2_input2"]').is(':checked')){            
            return false;
        }        
    } else if(stpnum == 3){        
        if(!$('input[name="step_3_input1"]').val() || !$('input[name="step_3_input2"]').val() || !$('input[name="step_3_input3"]').val() || !$('input[name="step_3_input4"]').val()) {            
            return false;
        }        
    } else if(stpnum == 6){        
        if(!$('input[name="step_6_input2"]').val()) {            
            return false;
        }        
    } else if(stpnum == 85){        
        if(!$('input[name="step_85_input1"]').val() || !$('input[name="step_85_input2"]').val()) {            
            return false;
        }        
    }        
    return true;    
}

function nextStp(stp){ 
    let isValidStep = true;
    var currstp=stp-1;  

    isValidStep = validationRuleCheck(currstp); //check validation rule for fields..

    if(isValidStep){ //check if step required fields is fillable...
        $(".frm_stp_"+currstp).find('.error').hide();
        $('.frm_stp_'+stp+' input:first').focus();      
        if(stp === 86){            
            submitForm();
            $('.submit-error').hide();
            $('.submit-box').hide();
            $('.loading-box').html('<span class="loader"></span>');
        }else{
           executestep(stp); 
        }        
    }else{
        $(".frm_stp_"+currstp).find('.error').show();
        return false;
    }
}

function validateEmailAddress(input) {
    var regex = /[^\s@]+@[^\s@]+\.[^\s@]+/;
    if (regex.test(input)) {
        return true;
    } else {
        return false;
    }
}

function executestep(stpnum){ 
    autoFillFields(stpnum);
    $(".stpsform").removeClass('transup');    
    barprogress(stpnum);
    $('.frm_stp_'+stpnum).addClass('transup');   
    setTimeout(function() { 
        window.scrollTo({ top: 0, behavior: "smooth" });
    }, 500);
     
}

function autoFillFields(stpnum){
    if(stpnum == 27 || stpnum == 44){
        $('#step_'+stpnum+'_input1').val(formData['step_1_input1']);
        $('#step_'+stpnum+'_input2').val(formData['step_2_input1']);
    }    
}

function barprogress(wid){
    var calprog=wid*1.17;
    $('.Barwid').css('width',calprog+'%');
}

/*Dropdown Menu*/
$('.dropdown').click(function () {
        $(this).attr('tabindex', 1).focus();
        $(this).toggleClass('active');
        $(this).find('.dropdown-menu').slideToggle(300);
    });
    $('.dropdown').focusout(function () {
        $(this).removeClass('active');
        $(this).find('.dropdown-menu').slideUp(300);
    });
    $('.dropdown .dropdown-menu li').click(function () {
        $(this).parents('.dropdown').find('span').text($(this).text());
        $(this).parents('.dropdown').find('input').attr('value', $(this).attr('id'));        
    });
/*End Dropdown Menu*/

$('.dropdown-menu li').click(function () {
  var input = '<strong>' + $(this).parents('.dropdown').find('input').val() + '</strong>',
      msg = '<span class="msg">Hidden input value: ';
  $('.msg').html(msg + input + '</span>');
});

$("#blinkagain").click(function() {
    var $el = $(".blink");
    $el.removeClass("blink");
    setTimeout(function() {$el.addClass("blink");}, 100);
});

$(".inputGroup").click(function(){
    $('.inputGroup').removeClass('blink');
    if($(this).find('input').prop('checked') == true){      
        $(this).addClass('blink');
    }   
});

function submitForm(){
    var inputData = $.map($("input[type='text'], input[type='email'], input[type='date']"), function(elem, idx) {
        const name = $(elem).attr("name");
        formData[name] = $(elem).val();
    });     

    var radioData = $.map($("input:radio:checked"), function(elem, idx) {
        const name = $(elem).attr("name");
        formData[name] = $(elem).val();
    });
    
    var checkboxData = $.map($("input:checkbox:checked"), function(elem, idx) {
        const name = $(elem).attr("name");
        formData[name] = $(elem).val();
    });    

    $.ajax({
      url:'helpers/apiRoute.php?type=process-data',
      type:'POST',
      data:formData,
      dataType:'json',
      success:function(response){
        $('.submit-box').show();
        $('.loading-box').html('');
        if(response.msg == 'success'){
            $('.home-btn').hide();
            executestep(100); 
            $('#form_refer')[0].reset();
        }else{
            $('.submit-error').show();
        }
      }
    });
}

function prevStp(stpprev){
    $(".stpsform").removeClass('transup');
    barprogress(stpprev);
    $('.frm_stp_'+stpprev).addClass('transup');   
}

let sheight = screen.height;
if(sheight>800){
    $('.hetsrl').addClass('scradjmob');
    $('.hetmobsrl').addClass('scradjmob');
}
